def readFile(filename):
    file = open(filename, "r");
    data = file.read();
    file.close();
    return data;

# read the decipher file
decipher = readFile("visionary/Decipher(Cipher1).txt");

# read the cipher file
cipher = readFile("visionary/Cipher1.txt");

# read the cipher flag file
cipherFlag = readFile("visionary/cipherFlag.txt");

# read the table
table = readFile("table.tsv");

# split the table into a 2d array
tableData = []
for line in table.split("\n"):
    tableData.append(line.split(" "));
tableData.pop();

def obtainMissingInfo(known, reference):
    missingInfo = "";
    for i in range(len(cipherFlag)):
        column = tableData[0].index(known[i]);
        for row in range(len(tableData)):
            if tableData[row][column] == reference[i]:
                missingInfo += tableData[row][0];
                break;
    return missingInfo;

# obtain the key
partialKey = obtainMissingInfo(decipher, cipher);
print("partial key: {}".format(partialKey));

# obtain the deciphered flag
decipherFlag = obtainMissingInfo(partialKey, cipherFlag);
print("decipherFlag: {}".format(decipherFlag));

